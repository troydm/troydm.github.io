<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Binary to Decimal/Hex Converter</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<style>
body {
  font-size: 15px;
  font-family: Consolas, monospace;
}

.binary-form {
  width: 100%;
  max-width: 610px;
  padding: 15px;
  margin: auto;
}

.binary-form .form-control {
  position: relative;
  box-sizing: border-box;
  height: auto;
  padding: 10px;
  font-size: 16px;
  margin: 10px;
}

.binary {
   border-top: 1px solid #333;
   border-bottom: 1px solid #333;
   border-left: 1px solid #333;
   padding: 3px;
   cursor: pointer;
   float: left;	
}

.binary-end {
   border: 1px solid #333;
   padding: 3px;
   cursor: pointer;
   float: left;	
}

.binary-space {
   width: 20px;
   float: left;	
}

.center-block {
   margin: 10px;
   width: 100%;
   display:block;
}
</style>
<body onload="update()" class="text-center">
    <form class="binary-form">
        <div>
          <label for="decimal" class="sr-only">Decimal</label>
          <input id="decimal" onkeyup="update()" type="text" class="form-control" placeholder="Decimal" >
		  <label for="twoscomp" class="sr-only">Two's Complement</label>
          <input id="twoscomp" onkeyup="updateTwoscomp()" type="text" class="form-control" placeholder="Two's Complement" >
          <label for="hex" class="sr-only">Hex</label>
          <input id="hex" onkeyup="updateHex()" type="text" class="form-control" placeholder="Hex" >        
        </div>
        <div class="center-block">
        <div id="b31" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b30" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b29" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b28" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b27" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b26" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b25" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b24" class="binary-end" onclick="binaryClick(this)">0</div>
        <div class="binary-space">&nbsp;</div>        
        <div id="b23" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b22" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b21" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b20" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b19" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b18" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b17" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b16" class="binary-end" onclick="binaryClick(this)">0</div>
        <div class="binary-space">&nbsp;</div>
        <div id="b15" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b14" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b13" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b12" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b11" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b10" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b9" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b8" class="binary-end" onclick="binaryClick(this)">0</div>
        <div class="binary-space">&nbsp;</div>
        <div id="b7" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b6" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b5" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b4" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b3" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b2" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b1" class="binary" onclick="binaryClick(this)">0</div>
        <div id="b0" class="binary-end" onclick="binaryClick(this)">0</div>
        </div>
    </form>
    <script type="text/javascript">
    
    function dToH(v) {
        var a = ['A','B','C','D','E','F'];
        if (v > 9) {
            return a[v-10];
        }else{
            return v;
        }
    }
    function hToD(v) {
        var a = ['A','B','C','D','E','F'];
        if (!isNaN(parseInt(v, 10))) {
            return parseInt(v);
        } else {
            var i = 0;
            while(i < 6) {
                if(v.toUpperCase() == a[i]) {
                    return i+10;
                }
                i += 1;
            }
        }
    }
    
    function updateHex() {
        var h = document.getElementById("hex");
        var s = h.value;
        if(s == ""){
            return;
        }
        var d = 0;
        for (var i = s.length - 1; i >= 0; i--) {
            var c = s.charAt(i).toUpperCase();
            if(!isNaN(parseInt(c, 10)) || c == 'A' || c == 'B' || c == 'C' || c == 'D' || c == 'E' || c == 'F'){
                d += hToD(c)*Math.pow(16,s.length - 1 - i);
            }else{
                update();
                return;
            }
        }
        document.getElementById("decimal").value = d;
		document.getElementById("twoscomp").value = twosComplement(d);
        update();
    }
	
	function twosComplement(v) {
		if (!document.getElementById("decimal").value) {
			return "";
		}
	    v = v % 256;
		if (v > 127) {
			return -(256-v);
		}
		return v;
	}
    
    function getVal() {
        var d = document.getElementById("decimal");
        var v = parseInt(d.value);
        if (v == null || isNaN(v)){
            v = 0;
        }
        return v;
    }
    
    function getBinArray() {
        var a = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
        var v = getVal();
        var i = 0;
        while(i<32){
            var bit = v % 2;
            v = Math.floor(v/2);
            a[i] = bit;
            i += 1;
        }
        return a;
    }
    
    function binaryClick(e) {
    	var i = parseInt(e.id.substring(1));
    	var a = getBinArray();
        a[i] = a[i] == 0 ? 1 : 0;
        var i = 0;
        var v = 0;
        while(i<32){
            if (a[i] == 1) {
                v += Math.pow(2,i);
            }
            i += 1;
        }
        var d = document.getElementById("decimal");
        d.value = ""+v;
		document.getElementById("twoscomp").value = twosComplement(v);
        update();
    }
    
    function update() {
        var a = getBinArray();
        var h = document.getElementById("hex");
        var v = getVal();
		document.getElementById("twoscomp").value = twosComplement(v);
        var hv = "";
        while(v > 0){
            hv = dToH(v % 16)+hv;
            v = Math.floor(v/16);
        }
        h.value = hv;
        
        for(var i = 0; i < 32; i++){
        	var b = document.getElementById("b"+i); 
        	b.innerHTML = a[i];
        }
    }
	
	function updateTwoscomp() {
	    var d = document.getElementById("twoscomp");
		var v = parseInt(d.value);
        if (v == null || isNaN(v)){
            return;
        }
		if (v > 127) {
		    v = v % 128;
		}
		if (v < -128) {
		    v = v % 129;
		}
		if (v < 0) {
			v = 256+v;
		}
		document.getElementById("decimal").value = v;
		update();
	}
    
    
    </script>
    </body>
</html>